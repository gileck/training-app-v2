# Test info

- Name: Training Plans >> should delete a training plan
- Location: /Users/gil/Projects/training-app-v2/tests/e2e/training-plans.spec.ts:64:9

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: 2
Received: 3
    at /Users/gil/Projects/training-app-v2/tests/e2e/training-plans.spec.ts:82:34
```

# Page snapshot

```yaml
- navigation:
  - button "open drawer"
  - button "Home"
  - button "Training Plans"
  - button "Workout"
  - button "G"
- main:
  - heading "Training Plans" [level=1]
  - button "Saved Workouts"
  - button "Add Plan"
  - list:
    - listitem:
      - text: E2E Test Plan
      - paragraph: 12 Weeks
      - text: "Created: Jun 1, 2025"
      - button
      - button "Manage Exercises"
      - button "Duplicate Plan"
      - button "Delete Plan"
    - separator
    - listitem:
      - text: plan 2
      - paragraph: 4 Weeks
      - text: "Created: May 9, 2025"
      - button
      - button "Manage Exercises"
      - button "Duplicate Plan"
      - button "Delete Plan"
    - separator
    - listitem:
      - text: plan 1 Active
      - paragraph: 8 Weeks
      - text: "Created: May 2, 2025"
      - button [disabled]
      - button "Manage Exercises"
      - button "Duplicate Plan"
      - button "Delete Plan"
- contentinfo
- button "Open Next.js Dev Tools":
  - img
- alert
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('Training Plans', () => {
   4 |     test.beforeEach(async ({ page }) => {
   5 |         await page.goto('/');
   6 |         await page.waitForLoadState('networkidle');
   7 |     });
   8 |
   9 |     test('should create a new training plan', async ({ page }) => {
  10 |         // Navigate to training plans page
  11 |         await page.click('[data-testid="training-plans-nav"]', { timeout: 10000 });
  12 |         await page.waitForLoadState('networkidle');
  13 |
  14 |         // Click create new plan button
  15 |         await page.click('[data-testid="create-plan-button"]');
  16 |
  17 |         // Fill in plan details
  18 |         await page.fill('[data-testid="plan-name-input"]', 'E2E Test Plan');
  19 |         await page.fill('[data-testid="plan-description-input"]', 'Plan created by e2e test');
  20 |
  21 |         // Click on the duration select to open dropdown
  22 |         await page.click('[data-testid="plan-duration-select"]');
  23 |         // Click on the 12 weeks option
  24 |         await page.click('text=12 Weeks');
  25 |
  26 |         // Save the plan
  27 |         await page.click('[data-testid="save-plan-button"]');
  28 |         await page.waitForLoadState('networkidle');
  29 |
  30 |         // Verify plan was created
  31 |         await expect(page.locator('[data-testid="plan-card"]').filter({ hasText: 'E2E Test Plan' })).toBeVisible();
  32 |     });
  33 |
  34 |     test('should navigate to manage exercises', async ({ page }) => {
  35 |         await page.goto('/training-plans');
  36 |         await page.waitForLoadState('networkidle');
  37 |
  38 |         // Click on manage exercises button for the first plan
  39 |         const planCard = page.locator('[data-testid="plan-card"]').first();
  40 |         await planCard.locator('[data-testid="manage-exercises-button"]').click();
  41 |         await page.waitForLoadState('networkidle');
  42 |
  43 |         // Verify we navigated to exercises page
  44 |         await expect(page).toHaveURL(/\/training-plans\/.*\/exercises/);
  45 |     });
  46 |
  47 |     test('should duplicate a training plan', async ({ page }) => {
  48 |         await page.goto('/training-plans');
  49 |         await page.waitForLoadState('networkidle');
  50 |
  51 |         // Get initial plan count
  52 |         const initialPlanCount = await page.locator('[data-testid="plan-card"]').count();
  53 |
  54 |         // Duplicate the first plan
  55 |         const planCard = page.locator('[data-testid="plan-card"]').first();
  56 |         await planCard.locator('[data-testid="duplicate-plan-button"]').click();
  57 |         await page.waitForLoadState('networkidle');
  58 |
  59 |         // Verify plan was duplicated
  60 |         const newPlanCount = await page.locator('[data-testid="plan-card"]').count();
  61 |         expect(newPlanCount).toBe(initialPlanCount + 1);
  62 |     });
  63 |
  64 |     test('should delete a training plan', async ({ page }) => {
  65 |         await page.goto('/training-plans');
  66 |         await page.waitForLoadState('networkidle');
  67 |
  68 |         // Get initial plan count
  69 |         const initialPlanCount = await page.locator('[data-testid="plan-card"]').count();
  70 |
  71 |         if (initialPlanCount > 1) {
  72 |             // Delete the first plan
  73 |             const planCard = page.locator('[data-testid="plan-card"]').first();
  74 |             await planCard.locator('[data-testid="delete-plan-button"]').click();
  75 |
  76 |             // Confirm deletion
  77 |             await page.click('[data-testid="confirm-button"]');
  78 |             await page.waitForLoadState('networkidle');
  79 |
  80 |             // Verify plan was deleted
  81 |             const newPlanCount = await page.locator('[data-testid="plan-card"]').count();
> 82 |             expect(newPlanCount).toBe(initialPlanCount - 1);
     |                                  ^ Error: expect(received).toBe(expected) // Object.is equality
  83 |         }
  84 |     });
  85 |
  86 |     test('should set active training plan', async ({ page }) => {
  87 |         await page.goto('/training-plans');
  88 |         await page.waitForLoadState('networkidle');
  89 |
  90 |         // Find a non-active plan and make it active
  91 |         const inactivePlan = page.locator('[data-testid="plan-card"]').filter({ hasNotText: 'Active' }).first();
  92 |         await inactivePlan.locator('[data-testid="set-active-button"]').click();
  93 |         await page.waitForLoadState('networkidle');
  94 |
  95 |         // Verify plan is now active
  96 |         await expect(inactivePlan.locator('[data-testid="active-badge"]')).toBeVisible();
  97 |     });
  98 | }); 
```